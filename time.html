<html>
<head>
<script>
function showTime(){
   var t=new Date()
   var year=t.getFullYear();
   var month=t.getMonth()+1;
   var day=t.getDate();
   var week=t.getDay();
   var arr=new Array("周日","周一","周二","周三","周四","周五","周六")
   var hour=t.getHours();
   var minute=t.getMinutes();
   var second=t.getSeconds();
   var showTime =year+"/"+month+"/"+day+" "+arr[week]+
   " "+hour+((minute<10)?":0":":")+minute+((second<10)?":0":":")+second+((hour>12)?".pm":".am");
   document.getElementById("clock").value=showTime;
}
setInterval("showTime()",1000);
</script>
<title>网络时钟</title>
</head>
<body>
   <div>
	<center>
	<p><span id="showuser1"></span>&nbsp<span id="ip1"></span>&nbsp<span id="province1"></span>&nbsp<span id="city1"></span>&nbsp<span id="isp1"></span>&nbsp<span id="end"></span></p>
	                        <script>
		                        // 使用免费的ipify API获取访客的IP地址
		                        fetch('https://api.ipify.org/?format=json')
			                        .then(response => response.json())
			                        .then(data => {
			                                let ip_add = data.ip;
			                                let url_get="https://www.fkcoder.com/ip?ip=";
			                                let url_add=url_get+ip_add;
						        document.getElementById('showuser1').textContent = "欢迎来自：";
				                        document.getElementById('ip1').textContent = data.ip;
			                                // 使用免费的API获取访客的归属地
			                                fetch(url_add)
			                                .then(response => response.json())
			                                .then(data => {
                                                        if(data.province!='0'){
			                                document.getElementById('province1').textContent = data.province;
                                      }
                                                        if(data.city!='0'){
			                                document.getElementById('city1').textContent = data.city;
                                      }
                                                        if(data.isp!='0'){
			                                document.getElementById('isp1').textContent = data.isp;
                                      }
	                                                document.getElementById('end').textContent = "的用户";
			                                })
			                        .catch(error => console.error(error));
			                        })
			                        .catch(error => console.error(error));
					         setTimeout(function() {
                                                 document.getElementById('showuser1').textContent = "";
			                         document.getElementById('ip1').textContent ="";
                                                 document.getElementById('province1').textContent = "";
			                         document.getElementById('city1').textContent ="";
                                                 document.getElementById('isp1').textContent = "";
			                         document.getElementById('end').textContent ="";
                       }, 8000);
	                        </script>
	</center>
	</div>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"/>   
<br><br><br><br><br><br><br><br><br>
<center>
<label>当前的时间为</label><br><br>
<input type="text" id="clock" style="width:200px;height:30px;">
</center>
</body>
</html>
